<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>Note.Lab - Developer Notes</title>
    <link rel="stylesheet" href="frontend/css/main.css">
    <link rel="stylesheet" href="frontend/css/editor.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/github-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="icon" type="image/png" href="frontend/assets/Image/Logo.png">
</head>
<body>
    <div class="app-container">
        <!-- Mobile Overlay -->
        <div class="mobile-overlay" id="mobileOverlay"></div>
        
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="frontend/assets/Image/Logo.png" alt="Note.Lab Logo" class="logo-image-small">
                </div>
                <button class="new-note-btn" id="newNoteBtn">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                    New Note
                </button>
            </div>
            
            <div class="sidebar-search">
                <input type="text" placeholder="Search notes..." id="searchInput">
            </div>
            
            <div class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item active">
                        <a href="#" data-view="all">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                            </svg>
                            All Notes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" data-view="starred">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                            Starred
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="sidebar-notes" id="notesList">
                <!-- Category Sections -->
                <div class="notes-category" id="planNotesSection">
                    <div class="category-header">
                        <span class="category-icon">üìã</span>
                        <span class="category-title">Plan Notes</span>
                        <span class="category-count" id="planNotesCount">0</span>
                    </div>
                    <div class="category-notes" id="planNotesList">
                        <!-- Plan notes will be populated here -->
                    </div>
                </div>

                <div class="notes-category" id="codeNotesSection">
                    <div class="category-header">
                        <span class="category-icon">üíª</span>
                        <span class="category-title">Code Notes</span>
                        <span class="category-count" id="codeNotesCount">0</span>
                    </div>
                    <div class="category-notes" id="codeNotesList">
                        <!-- Code notes will be populated here -->
                    </div>
                </div>

                <div class="notes-category" id="credentialsNotesSection">
                    <div class="category-header">
                        <span class="category-icon">üîê</span>
                        <span class="category-title">Secure Credentials</span>
                        <span class="category-count" id="credentialsNotesCount">0</span>
                    </div>
                    <div class="category-notes" id="credentialsNotesList">
                        <!-- Credential notes will be populated here -->
                    </div>
                </div>

                <div class="notes-category" id="otherNotesSection">
                    <div class="category-header">
                        <span class="category-icon">üìÑ</span>
                        <span class="category-title">Other Notes</span>
                        <span class="category-count" id="otherNotesCount">0</span>
                    </div>
                    <div class="category-notes" id="otherNotesList">
                        <!-- Other notes will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-details">
                        <div class="user-name">Developer</div>
                        <button class="logout-btn" id="logoutBtn">Sign out</button>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Mobile Header (visible only on mobile) -->
            <div class="mobile-header">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </button>
                <div class="mobile-title" id="mobileTitle">Note.Lab</div>
                <div style="width: 40px;"></div> <!-- Spacer for centering -->
            </div>
            
            <!-- Welcome Screen -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <div class="welcome-header">
                        <h1>üìù Welcome to Note.Lab</h1>
                        <p>Choose a template to get started with your notes</p>
                    </div>
                    
                    <div class="template-grid">
                        <div class="template-card" data-template="plan">
                            <div class="template-icon">üìã</div>
                            <h3>Plan Notes</h3>
                            <p>Perfect for project planning, task lists, and general note-taking</p>
                            <div class="template-features">
                                <span class="feature-tag">‚úì Task Lists</span>
                                <span class="feature-tag">‚úì Project Planning</span>
                                <span class="feature-tag">‚úì Meeting Notes</span>
                            </div>
                        </div>

                        <div class="template-card" data-template="code">
                            <div class="template-icon">üíª</div>
                            <h3>Code Notes</h3>
                            <p>Optimized for developers with syntax highlighting and code snippets</p>
                            <div class="template-features">
                                <span class="feature-tag">‚úì Syntax Highlighting</span>
                                <span class="feature-tag">‚úì Code Snippets</span>
                                <span class="feature-tag">‚úì API Documentation</span>
                            </div>
                        </div>

                        <div class="template-card" data-template="credentials">
                            <div class="template-icon">üîê</div>
                            <h3>Secure Credentials</h3>
                            <p>Safely store passwords, API keys, and sensitive information</p>
                            <div class="template-features">
                                <span class="feature-tag">‚úì Password Storage</span>
                                <span class="feature-tag">‚úì Field Masking</span>
                                <span class="feature-tag">‚úì Secure Templates</span>
                            </div>
                        </div>


                    </div>

                    <div class="template-actions">
                        <button class="btn-secondary" id="createBlankNote">Start with blank note</button>
                    </div>
                </div>
            </div>
            
            <!-- Note Editor -->
            <div class="note-editor" id="noteEditor" style="display: none;">
                <div class="editor-header">
                    <input type="text" class="note-title" id="noteTitle" placeholder="Untitled note...">
                                    <div class="editor-actions">
                    <button class="btn-primary" id="saveNote" title="Save and return to welcome page">
                        Save
                    </button>
                    <button class="btn-secondary" id="starNote">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.576-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                        </svg>
                    </button>
                    <button class="btn-secondary" id="deleteNote">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 1 1 0V6Z"/>
                            <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"/>
                        </svg>
                    </button>
                </div>
                </div>
                
                <div class="editor-toolbar">
                    <div class="toolbar-left">
                        <!-- Text Formatting Group -->
                        <div class="toolbar-group">
                            <button class="toolbar-btn" title="Bold (Ctrl+B)" data-action="bold">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Italic (Ctrl+I)" data-action="italic">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Strikethrough" data-action="strikethrough">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6.85 7.08C6.85 4.37 9.45 3 12.24 3c1.64 0 3 .49 3.9 1.28.77.65 1.46 1.73 1.46 3.24h-3.01c0-.31-.05-.59-.15-.85-.29-.86-1.2-1.28-2.25-1.28-1.86 0-2.34 1.02-2.34 1.7 0 .48.25.88.74 1.21.38.25.77.48 1.41.7H7.39c-.21-.34-.54-.89-.54-1.72zM21 12v2H3v-2h18zM12.56 14c1.1.24 1.86.39 2.24.58.58.28 1.36.78 1.36 2.05C16.16 18.39 14.6 21 12.24 21c-1.64 0-3.16-.37-4.15-1.15C7.16 19.15 6.54 18.22 6.54 17h3.01c0 .44.21.83.67 1.11.35.22.78.31 1.07.31 1.53 0 2.65-.58 2.65-1.9 0-.86-.57-1.18-1.38-1.52z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Inline Code" data-action="code">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="toolbar-divider"></div>

                        <!-- Structure Group -->
                        <div class="toolbar-group">
                            <div class="toolbar-dropdown">
                                <button class="toolbar-btn dropdown-toggle" title="Headings" data-action="heading">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M5 4v3h5.5v12h3V7H19V4z"/>
                                    </svg>
                                    <svg width="8" height="8" viewBox="0 0 24 24" fill="currentColor" class="dropdown-arrow">
                                        <path d="M7 10l5 5 5-5z"/>
                                    </svg>
                                </button>
                                <div class="dropdown-menu">
                                    <button data-action="h1">Heading 1</button>
                                    <button data-action="h2">Heading 2</button>
                                    <button data-action="h3">Heading 3</button>
                                    <button data-action="h4">Heading 4</button>
                                    <button data-action="h5">Heading 5</button>
                                    <button data-action="h6">Heading 6</button>
                                </div>
                            </div>
                            <button class="toolbar-btn" title="Unordered List" data-action="ul">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Ordered List" data-action="ol">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Blockquote" data-action="quote">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="toolbar-divider"></div>

                        <!-- Insert Group -->
                        <div class="toolbar-group">
                            <button class="toolbar-btn" title="Link" data-action="link">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Code Block" data-action="codeblock">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l2 3 2-3h9c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 8.5L7.5 15 6 13.5l1.5-1.5L6 10.5 7.5 9 11 12.5zm6 2.5h-4v-2h4v2z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Table" data-action="table">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5v11zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2zM3 19c0 1.1.9 2 2 2h3V10H3v9z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Horizontal Rule" data-action="hr">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4 11h16v2H4z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="toolbar-center">
                        <button class="toolbar-btn preview-toggle" title="Toggle Preview" id="previewToggle">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>

                    <div class="toolbar-right">
                        <span class="word-count" id="wordCount">0 words</span>
                        <span class="save-status" id="saveStatus">Saved</span>
                    </div>
                </div>

                <!-- Plan Note Toolbar (Full Featured) -->
                <div class="editor-toolbar plan-toolbar" id="planToolbar" style="display: none;">
                    <div class="toolbar-left">
                        <!-- Text Formatting Group -->
                        <div class="toolbar-group">
                            <button class="toolbar-btn" title="Bold (Ctrl+B)" data-action="bold">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Italic (Ctrl+I)" data-action="italic">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Strikethrough" data-action="strikethrough">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6.85 7.08C6.85 4.37 9.45 3 12.24 3c1.64 0 3 .49 3.9 1.28.77.65 1.46 1.73 1.46 3.24h-3.01c0-.31-.05-.59-.15-.85-.29-.86-1.2-1.28-2.25-1.28-1.86 0-2.34 1.02-2.34 1.7 0 .48.25.88.74 1.21.38.25.77.48 1.41.7H7.39c-.21-.34-.54-.89-.54-1.72zM21 12v2H3v-2h18zM12.56 14c1.1.24 1.86.39 2.24.58.58.28 1.36.78 1.36 2.05C16.16 18.39 14.6 21 12.24 21c-1.64 0-3.16-.37-4.15-1.15C7.16 19.15 6.54 18.22 6.54 17h3.01c0 .44.21.83.67 1.11.35.22.78.31 1.07.31 1.53 0 2.65-.58 2.65-1.9 0-.86-.57-1.18-1.38-1.52z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Inline Code" data-action="code">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Paragraph" data-action="paragraph">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M13 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4H9V6h4m0-2H7v14h2v-4h4a6 6 0 0 0 6-6 6 6 0 0 0-6-6z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="toolbar-divider"></div>

                        <!-- Structure Group -->
                        <div class="toolbar-group">
                            <div class="toolbar-dropdown">
                                <button class="toolbar-btn dropdown-toggle" title="Headings" data-action="heading">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M5 4v3h5.5v12h3V7H19V4z"/>
                                    </svg>
                                    <svg width="8" height="8" viewBox="0 0 24 24" fill="currentColor" class="dropdown-arrow">
                                        <path d="M7 10l5 5 5-5z"/>
                                    </svg>
                                </button>
                                <div class="dropdown-menu">
                                    <button data-action="h1">Heading 1</button>
                                    <button data-action="h2">Heading 2</button>
                                    <button data-action="h3">Heading 3</button>
                                    <button data-action="h4">Heading 4</button>
                                    <button data-action="h5">Heading 5</button>
                                    <button data-action="h6">Heading 6</button>
                                </div>
                            </div>
                            <button class="toolbar-btn" title="Unordered List" data-action="ul">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Ordered List" data-action="ol">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Blockquote" data-action="quote">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
                                </svg>
                            </button>
                        </div>

                        <div class="toolbar-divider"></div>

                        <!-- Insert Group -->
                        <div class="toolbar-group">
                            <button class="toolbar-btn" title="Link" data-action="link">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Code Block" data-action="codeblock">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l2 3 2-3h9c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 8.5L7.5 15 6 13.5l1.5-1.5L6 10.5 7.5 9 11 12.5zm6 2.5h-4v-2h4v2z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Table" data-action="table">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5v11zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2zM3 19c0 1.1.9 2 2 2h3V10H3v9z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" title="Horizontal Rule" data-action="hr">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4 11h16v2H4z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="toolbar-center">
                        <button class="toolbar-btn preview-toggle" title="Toggle Preview" data-preview-toggle="plan">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="toolbar-right">
                        <span class="word-count" id="wordCount">0 words</span>
                        <span class="save-status" id="saveStatus">Saved</span>
                        <span class="note-type-indicator">üìã Plan Note</span>
                    </div>
                </div>

                <!-- Code Note Toolbar -->
                <div class="editor-toolbar code-toolbar" id="codeToolbar" style="display: none;">
                    <div class="toolbar-left">
                        <div class="toolbar-group">
                            <div class="toolbar-dropdown">
                                <button class="dropdown-toggle" data-dropdown="languages">
                                    <span id="selectedLanguage">JavaScript</span>
                                    <svg class="dropdown-arrow" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
                                    </svg>
                                </button>
                                <div class="dropdown-menu" data-menu="languages">
                                    <button data-lang="javascript">JavaScript</button>
                                    <button data-lang="python">Python</button>
                                    <button data-lang="java">Java</button>
                                    <button data-lang="csharp">C#</button>
                                    <button data-lang="cpp">C++</button>
                                    <button data-lang="php">PHP</button>
                                    <button data-lang="ruby">Ruby</button>
                                    <button data-lang="go">Go</button>
                                    <button data-lang="rust">Rust</button>
                                    <button data-lang="typescript">TypeScript</button>
                                    <button data-lang="sql">SQL</button>
                                    <button data-lang="html">HTML</button>
                                    <button data-lang="css">CSS</button>
                                    <button data-lang="json">JSON</button>
                                    <button data-lang="yaml">YAML</button>
                                    <button data-lang="markdown">Markdown</button>
                                </div>
                            </div>
                            <button class="toolbar-btn" data-action="code-block" title="Insert Code Block">üíª</button>
                            <button class="toolbar-btn" data-action="inline-code" title="Inline Code">üìü</button>
                            <button class="toolbar-btn" data-action="comment" title="Add Comment">üí¨</button>
                            <button class="toolbar-btn" data-action="function-template" title="Function Template">‚öôÔ∏è</button>
                        </div>
                    </div>
                    <div class="toolbar-center">
                        <button class="toolbar-btn preview-toggle" title="Toggle Preview" data-preview-toggle="code">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="toolbar-right">
                        <span class="note-type-indicator">üíª Code Note</span>
                    </div>
                </div>

                <!-- Secure Credentials Toolbar -->
                <div class="editor-toolbar credentials-toolbar" id="credentialsToolbar" style="display: none;">
                    <div class="toolbar-left">
                        <div class="toolbar-group">
                            <div class="toolbar-dropdown">
                                <button class="toolbar-btn dropdown-trigger" title="Quick Templates">
                                    <span>üìã Templates</span>
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M7 10l5 5 5-5z"/>
                                    </svg>
                                </button>
                                <div class="dropdown-menu" data-menu="credential-templates">
                                    <button data-template="web-hosting">üåê Web Hosting</button>
                                    <button data-template="domain">üîó Domain Access</button>
                                    <button data-template="social-media">üì± Social Media</button>
                                    <button data-template="email">üìß Email Account</button>
                                    <button data-template="database">üóÑÔ∏è Database</button>
                                    <button data-template="ftp">üìÅ FTP/SFTP</button>
                                    <button data-template="api">üîë API Keys</button>
                                    <button data-template="server">üñ•Ô∏è Server Access</button>
                                </div>
                            </div>
                            <button class="toolbar-btn" data-action="generate-password" title="Generate Password">üé≤</button>
                            <button class="toolbar-btn" data-action="quick-form" title="Smart Form">üìù</button>
                        </div>
                    </div>
                    <div class="toolbar-center">
                        <button class="toolbar-btn preview-toggle" title="Toggle Preview" data-preview-toggle="credentials">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="toolbar-right">
                        <span class="note-type-indicator">üîê Secure Credentials</span>
                    </div>
                </div>
                
                <div class="editor-container">
                    <div class="editor-panes">
                        <div class="editor-pane">
                            <textarea id="codeEditor"></textarea>
                        </div>
                        <div class="preview-pane" id="previewPane" style="display: none;">
                            <!-- Mobile Preview Header -->
                            <div class="preview-header" style="display: none;">
                                <div class="preview-title">Preview</div>
                                <button class="preview-close-btn" id="previewCloseBtn">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="preview-content" id="previewContent">
                                <div class="preview-placeholder">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" opacity="0.3">
                                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                                    </svg>
                                    <p>Preview will appear here</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="resize-handle" id="resizeHandle" style="display: none;"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Credential Form Modal -->
    <div class="modal-overlay" id="credentialModal" style="display: none;">
        <div class="credential-form-modal">
            <div class="modal-header">
                <h3 id="modalTitle">Add Credentials</h3>
                <button class="modal-close" id="modalClose">√ó</button>
            </div>
            <div class="modal-body">
                <form id="credentialForm">
                    <div class="form-group">
                        <label for="credentialTitle">Title/Service Name</label>
                        <input type="text" id="credentialTitle" placeholder="e.g., AWS Account, Gmail, GoDaddy">
                    </div>
                    <div class="form-group">
                        <label for="credentialCategory">Category</label>
                        <select id="credentialCategory">
                            <option value="web-hosting">üåê Web Hosting</option>
                            <option value="domain">üîó Domain Access</option>
                            <option value="social-media">üì± Social Media</option>
                            <option value="email">üìß Email Account</option>
                            <option value="database">üóÑÔ∏è Database</option>
                            <option value="ftp">üìÅ FTP/SFTP</option>
                            <option value="api">üîë API Keys</option>
                            <option value="server">üñ•Ô∏è Server Access</option>
                            <option value="other">üîß Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="credentialUrl">URL/Website</label>
                        <input type="url" id="credentialUrl" placeholder="https://example.com">
                    </div>
                    <div class="form-group">
                        <label for="credentialUsername">Username/Email</label>
                        <input type="text" id="credentialUsername" placeholder="username or email@example.com">
                    </div>
                    <div class="form-group">
                        <label for="credentialPassword">Password</label>
                        <div class="password-input-group">
                            <input type="password" id="credentialPassword" placeholder="Enter password">
                            <button type="button" class="password-toggle" id="passwordToggle">üëÅÔ∏è</button>
                            <button type="button" class="generate-btn" id="generateBtn">üé≤</button>
                        </div>
                    </div>
                    <div class="form-group" id="dynamicFields">
                        <!-- Dynamic fields will be inserted here based on category -->
                    </div>
                    <div class="form-group">
                        <label for="credentialNotes">Additional Notes</label>
                        <textarea id="credentialNotes" rows="3" placeholder="Any additional information..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="modalCancel">Cancel</button>
                <button type="button" class="btn-primary" id="modalSave">Insert Credentials</button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/clike/clike.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/php/php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/ruby/ruby.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/go/go.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/rust/rust.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/sql/sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/yaml/yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/display/placeholder.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/5.1.1/marked.min.js"></script>
    <script src="frontend/js/app.js"></script>
    <script src="frontend/js/editor.js"></script>
    <script src="frontend/js/templates.js"></script>
</body>
</html>
